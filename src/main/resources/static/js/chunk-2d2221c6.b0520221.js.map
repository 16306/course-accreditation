{"version":3,"sources":["webpack:///./src/views/major/index.vue?744d","webpack:///./src/views/major/index.vue?4485","webpack:///./src/views/major/index.vue?3139","webpack:///./src/views/major/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","queryOptions","nativeOn","$event","preventDefault","handleFilter","queryMajorList","model","value","callback","$$v","$set","expression","on","_v","handleCreate","showCheckbox","handleBatchDelete","_e","showExcelDialog","directives","name","rawName","staticStyle","data","handleSelect","scopedSlots","_u","key","fn","scope","handleEdit","row","handleDelete","total","page","pageSize","requestData","major","id","showDialog","editForm","rules","slot","handleSave","staticRenderFns","loading","selectMajorId","code","required","message","trigger","init","api","queryMajor","res","list","resetForm","$refs","validate","valid","putMajor","status","$message","type","createMajor","resetFields","$confirm","then","deleteMajor","resp","filter","e","query","cb","option","majorList","map","item","select","length","batchDeleteMajor","component"],"mappings":"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","file":"js/chunk-2d2221c6.b0520221.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{ref:\"searchForm\",attrs:{\"inline\":true,\"model\":_vm.queryOptions},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.handleFilter($event)}}},[_c('el-form-item',{attrs:{\"prop\":\"name\"}},[_c('el-autocomplete',{attrs:{\"fetch-suggestions\":_vm.queryMajorList,\"placeholder\":\"请输入专业名称\"},model:{value:(_vm.queryOptions.name),callback:function ($$v) {_vm.$set(_vm.queryOptions, \"name\", $$v)},expression:\"queryOptions.name\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"code\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入专业代码\",\"maxlength\":\"10\"},model:{value:(_vm.queryOptions.code),callback:function ($$v) {_vm.$set(_vm.queryOptions, \"code\", $$v)},expression:\"queryOptions.code\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleFilter}},[_vm._v(\"\\n        搜索\\n      \")]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.handleCreate}},[_vm._v(\"\\n        专业\\n      \")])],1),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.showCheckbox=!_vm.showCheckbox}}},[_vm._v(\"\\n      多选\\n    \")]),(_vm.showCheckbox)?_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.handleBatchDelete}},[_vm._v(\"\\n      批量删除\\n    \")]):_vm._e(),_c('el-button',{on:{\"click\":function($event){_vm.showExcelDialog=true}}},[_vm._v(\"\\n      批量导入专业\\n    \")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.data,\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"},on:{\"selection-change\":_vm.handleSelect}},[(_vm.showCheckbox)?_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}):_vm._e(),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"专业名称\",\"prop\":\"name\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"专业代码\",\"prop\":\"code\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"createTime\",\"label\":\"添加时间\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"updateTime\",\"label\":\"更新时间\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\"\\n          编辑\\n        \")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"\\n          删除\\n        \")])]}}])})],1),_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total > 0),expression:\"total > 0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.queryOptions.page,\"limit\":_vm.queryOptions.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.queryOptions, \"page\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.queryOptions, \"pageSize\", $event)},\"pagination\":_vm.requestData}}),_c('el-dialog',{attrs:{\"title\":((_vm.major.id ? '编辑' : '添加') + \"专业\"),\"visible\":_vm.showDialog},on:{\"update:visible\":function($event){_vm.showDialog=$event},\"close\":function($event){_vm.showDialog = false}}},[(_vm.showDialog)?_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"prop\":\"name\",\"label\":\"专业名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入专业名称\",\"maxlength\":\"10\"},model:{value:(_vm.editForm.name),callback:function ($$v) {_vm.$set(_vm.editForm, \"name\", $$v)},expression:\"editForm.name\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"code\",\"label\":\"专业代码\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入专业代码\",\"maxlength\":\"10\"},model:{value:(_vm.editForm.code),callback:function ($$v) {_vm.$set(_vm.editForm, \"code\", $$v)},expression:\"editForm.code\"}})],1)],1):_vm._e(),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showDialog = false}}},[_vm._v(\"\\n        取 消\\n      \")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"\\n        确 定\\n      \")])],1)],1),_c('excel-dialog',{attrs:{\"action\":\"/major/batchSave\",\"show\":_vm.showExcelDialog},on:{\"update:show\":function($event){_vm.showExcelDialog=$event},\"requestData\":_vm.requestData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport { ElForm } from 'element-ui/types/form'\r\nimport * as m from '@/api/model'\r\nimport * as api from '@/api/api'\r\n\r\n@Component({})\r\nexport default class Major extends Vue {\r\n  data:m.Major[] = []\r\n  total = 0\r\n  loading = true\r\n  major: m.Major = {} as any\r\n  showDialog = false\r\n  editForm:m.CreateMajorForm={} as any\r\n  showCheckbox = false\r\n  selectMajorId:number[] = []\r\n  showExcelDialog=false\r\n\r\n  queryOptions = {\r\n    name: '',\r\n    code: '',\r\n    page: 1,\r\n    pageSize: 20\r\n  }\r\n\r\n  rules={\r\n    name: [{ required: true, message: '专业名称不能为空', trigger: 'blur' }],\r\n    code: [{ required: true, message: '专业代码不能为空', trigger: 'blur' }]\r\n  }\r\n\r\n  created() {\r\n    this.init()\r\n  }\r\n\r\n  async init() {\r\n    this.requestData()\r\n  }\r\n\r\n  handleFilter() {\r\n    this.queryOptions.page = 1\r\n    this.requestData()\r\n  }\r\n\r\n  async requestData() {\r\n    this.loading = true\r\n    const res = await this.api.queryMajor(this.queryOptions)\r\n    this.data = res.data.list\r\n    this.total = res.data.total\r\n    this.loading = false\r\n  }\r\n\r\n  handleCreate() {\r\n    this.major = {} as any\r\n    this.resetForm()\r\n    this.showDialog = true\r\n  }\r\n\r\n  resetForm() {\r\n    this.editForm = {\r\n      name: '',\r\n      code: ''\r\n    }\r\n  }\r\n\r\n  handleEdit(major: m.Major) {\r\n    this.major = major\r\n    this.editForm = {\r\n      code: major.code,\r\n      name: major.name\r\n    }\r\n    this.showDialog = true\r\n  }\r\n\r\n  handleSave() {\r\n    (this.$refs['editForm'] as ElForm).validate(async(valid : boolean) => {\r\n      if (valid) {\r\n        if (this.major.id) {\r\n          const res = await this.api.putMajor(this.major.id, this.editForm)\r\n          if (res.status === 0) {\r\n            this.resetForm()\r\n            this.showDialog = false\r\n            this.$message({\r\n              type: 'success',\r\n              message: '修改成功!'\r\n            })\r\n            this.requestData()\r\n          }\r\n        } else {\r\n          const res = await this.api.createMajor(this.editForm)\r\n          if (res.status === 0) {\r\n            (this.$refs['editForm'] as ElForm).resetFields()\r\n            this.showDialog = false\r\n            this.$message({\r\n              type: 'success',\r\n              message: '添加成功!'\r\n            })\r\n            this.requestData()\r\n          }\r\n        }\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  handleDelete(major: m.Major) {\r\n    this.$confirm(`确定删除${major.name}吗？`, '提示', {\r\n      type: 'warning'\r\n    }).then(async() => {\r\n      const resp = await this.api.deleteMajor(major.id)\r\n      if (resp.status === 0) {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        })\r\n        this.data = this.data.filter((e: m.Major) => e.id !== major.id)\r\n        if (this.total > 1) {\r\n          this.total--\r\n        } else {\r\n          this.requestData()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  async queryMajorList(query: string, cb:any) {\r\n    // cb为搜索后的回调钩子\r\n    const option = {\r\n      page: 1,\r\n      pageSize: 20,\r\n      name: query\r\n    }\r\n    const res = await this.api.queryMajor(option)\r\n    if (res.status === 0) {\r\n      let majorList = res.data.list.map((item:m.Major) => {\r\n        return { value: item.name }\r\n      })\r\n      cb(majorList)\r\n    }\r\n  }\r\n\r\n  handleSelect(select:m.Major[]) {\r\n    this.selectMajorId = select.map((item:m.Major) => {\r\n      return item.id\r\n    })\r\n  }\r\n\r\n  handleBatchDelete() {\r\n    if (this.selectMajorId.length < 1) {\r\n      this.$message({\r\n        type: 'warning',\r\n        message: '请先选择要删除项'\r\n      })\r\n      return\r\n    }\r\n    this.$confirm(`确定要批量删除所选项吗？`, '提示', {\r\n      type: 'warning'\r\n    }).then(async() => {\r\n      const resp = await this.api.batchDeleteMajor(this.selectMajorId)\r\n      if (resp.status === 0) {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        })\r\n        this.requestData()\r\n      }\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f200e43a&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}