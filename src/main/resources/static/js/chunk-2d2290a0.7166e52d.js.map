{"version":3,"sources":["webpack:///./src/views/select-course/index.vue?9c51","webpack:///./src/views/select-course/index.vue?8d5f","webpack:///./src/views/select-course/index.vue?2b3f","webpack:///./src/views/select-course/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","queryOptions","nativeOn","$event","preventDefault","handleFilter","model","value","callback","$$v","$set","expression","on","_v","handleCreate","showCheckbox","handleBatchDelete","_e","showExcelDialog","directives","name","rawName","staticStyle","data","handleSelect","scopedSlots","_u","key","fn","scope","handleEdit","row","handleDelete","total","page","pageSize","requestData","selectCourse","id","showDialog","editForm","rules","queryStudentList","loading","_l","item","sno","queryCourseClassList","no","slot","handleSave","staticRenderFns","selectCourseId","studentList","courseClassList","course","student","teacher","semester","courseClassId","required","message","trigger","studentId","init","api","querySelectCourse","res","list","resetForm","undefined","$refs","validate","valid","putSelectCourse","status","$message","type","createSelectCourse","resetFields","$confirm","then","deleteSelectCourse","resp","filter","e","query","option","queryStudent","queryCourseClass","select","map","length","batchDeleteSelectCourse","component"],"mappings":"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","file":"js/chunk-2d2290a0.7166e52d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{ref:\"searchForm\",attrs:{\"inline\":true,\"model\":_vm.queryOptions},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.handleFilter($event)}}},[_c('el-form-item',{attrs:{\"prop\":\"course\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入课程名称\"},model:{value:(_vm.queryOptions.course),callback:function ($$v) {_vm.$set(_vm.queryOptions, \"course\", $$v)},expression:\"queryOptions.course\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleFilter}},[_vm._v(\"\\n        搜索\\n      \")]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.handleCreate}},[_vm._v(\"\\n        添加选课\\n      \")])],1),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.showCheckbox=!_vm.showCheckbox}}},[_vm._v(\"\\n      多选\\n    \")]),(_vm.showCheckbox)?_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.handleBatchDelete}},[_vm._v(\"\\n      批量删除\\n    \")]):_vm._e(),_c('el-button',{on:{\"click\":function($event){_vm.showExcelDialog=true}}},[_vm._v(\"\\n      批量导入选课\\n    \")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.data,\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"},on:{\"selection-change\":_vm.handleSelect}},[(_vm.showCheckbox)?_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}):_vm._e(),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"学生编号\",\"prop\":\"sno\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"学生姓名\",\"prop\":\"student\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"课程序号\",\"prop\":\"no\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"课程名称\",\"prop\":\"course\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"老师名称\",\"prop\":\"teacher\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"学期\",\"prop\":\"semester\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"开始周\",\"prop\":\"startWeek\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"结束周\",\"prop\":\"endWeek\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"createTime\",\"label\":\"添加时间\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"updateTime\",\"label\":\"更新时间\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\"\\n          编辑\\n        \")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"\\n          删除\\n        \")])]}}])})],1),_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total > 0),expression:\"total > 0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.queryOptions.page,\"limit\":_vm.queryOptions.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.queryOptions, \"page\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.queryOptions, \"pageSize\", $event)},\"pagination\":_vm.requestData}}),_c('el-dialog',{attrs:{\"title\":((_vm.selectCourse.id ? '编辑' : '添加') + \"支撑课程\"),\"visible\":_vm.showDialog},on:{\"update:visible\":function($event){_vm.showDialog=$event},\"close\":function($event){_vm.showDialog = false}}},[(_vm.showDialog)?_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"prop\":\"studentId\",\"label\":\"学生\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"remote\":\"\",\"reserve-keyword\":\"\",\"placeholder\":\"请选择学生\",\"remote-method\":_vm.queryStudentList,\"loading\":_vm.loading},model:{value:(_vm.editForm.studentId),callback:function ($$v) {_vm.$set(_vm.editForm, \"studentId\", $$v)},expression:\"editForm.studentId\"}},_vm._l((_vm.studentList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.sno+' '+item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"prop\":\"courseClassId\",\"label\":\"课程班级\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"remote\":\"\",\"reserve-keyword\":\"\",\"placeholder\":\"请选择指标点编号\",\"remote-method\":_vm.queryCourseClassList,\"loading\":_vm.loading},model:{value:(_vm.editForm.courseClassId),callback:function ($$v) {_vm.$set(_vm.editForm, \"courseClassId\", $$v)},expression:\"editForm.courseClassId\"}},_vm._l((_vm.courseClassList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.no,\"value\":item.id}})}),1)],1)],1):_vm._e(),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showDialog = false}}},[_vm._v(\"\\n        取 消\\n      \")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"\\n        确 定\\n      \")])],1)],1),_c('excel-dialog',{attrs:{\"action\":\"/select-course/batchSave\",\"show\":_vm.showExcelDialog},on:{\"update:show\":function($event){_vm.showExcelDialog=$event},\"requestData\":_vm.requestData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport { ElForm } from 'element-ui/types/form'\r\nimport * as m from '@/api/model'\r\n\r\n@Component({})\r\nexport default class SelectCourse extends Vue {\r\n  data:m.SelectCourse[] = []\r\n  total = 0\r\n  loading = true\r\n  selectCourse: m.SelectCourse = {} as any\r\n  showDialog = false\r\n  editForm:m.CreateSelectCourseForm={} as any\r\n  showCheckbox = false\r\n  selectCourseId:number[] = []\r\n  showExcelDialog=false\r\n  studentList:m.Student[] =[]\r\n  courseClassList:m.CourseClass[]=[]\r\n\r\n  queryOptions = {\r\n    no: '',\r\n    course: '',\r\n    student: '',\r\n    teacher: '',\r\n    semester: '',\r\n    page: 1,\r\n    pageSize: 20\r\n  }\r\n\r\n  rules={\r\n    courseClassId: [{ required: true, message: '课程班级不能为空', trigger: 'blur' }],\r\n    studentId: [{ required: true, message: '学生不能为空', trigger: 'blur' }]\r\n  }\r\n\r\n  created() {\r\n    this.init()\r\n  }\r\n\r\n  async init() {\r\n    this.requestData()\r\n    this.queryStudentList('')\r\n    this.queryCourseClassList('')\r\n  }\r\n\r\n  handleFilter() {\r\n    this.queryOptions.page = 1\r\n    this.requestData()\r\n  }\r\n\r\n  async requestData() {\r\n    this.loading = true\r\n    const res = await this.api.querySelectCourse(this.queryOptions)\r\n    this.data = res.data.list\r\n    this.total = res.data.total\r\n    this.loading = false\r\n  }\r\n\r\n  handleCreate() {\r\n    this.selectCourse = {} as any\r\n    this.resetForm()\r\n    this.showDialog = true\r\n  }\r\n\r\n  resetForm() {\r\n    this.editForm = {\r\n      courseClassId: undefined,\r\n      studentId: undefined\r\n    }\r\n  }\r\n\r\n  handleEdit(selectCourse: m.SelectCourse) {\r\n    this.selectCourse = selectCourse\r\n    this.editForm = {\r\n      studentId: selectCourse.studentId,\r\n      courseClassId: selectCourse.courseClassId\r\n    }\r\n    this.showDialog = true\r\n  }\r\n\r\n  handleSave() {\r\n    (this.$refs['editForm'] as ElForm).validate(async(valid : boolean) => {\r\n      if (valid) {\r\n        if (this.selectCourse.id) {\r\n          const res = await this.api.putSelectCourse(this.selectCourse.id, this.editForm)\r\n          if (res.status === 0) {\r\n            this.resetForm()\r\n            this.showDialog = false\r\n            this.$message({\r\n              type: 'success',\r\n              message: '修改成功!'\r\n            })\r\n            this.requestData()\r\n          }\r\n        } else {\r\n          const res = await this.api.createSelectCourse(this.editForm)\r\n          if (res.status === 0) {\r\n            (this.$refs['editForm'] as ElForm).resetFields()\r\n            this.showDialog = false\r\n            this.$message({\r\n              type: 'success',\r\n              message: '添加成功!'\r\n            })\r\n            this.requestData()\r\n          }\r\n        }\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  handleDelete(selectCourse: m.SelectCourse) {\r\n    this.$confirm(`确定删除这条信息吗？`, '提示', {\r\n      type: 'warning'\r\n    }).then(async() => {\r\n      const resp = await this.api.deleteSelectCourse(selectCourse.id)\r\n      if (resp.status === 0) {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        })\r\n        this.data = this.data.filter((e: m.SelectCourse) => e.id !== selectCourse.id)\r\n        if (this.total > 1) {\r\n          this.total--\r\n        } else {\r\n          this.requestData()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  async queryStudentList(query: string) {\r\n    const option = {\r\n      page: 1,\r\n      pageSize: 20,\r\n      name: query\r\n    }\r\n    const res = await this.api.queryStudent(option)\r\n    if (res.status === 0) {\r\n      this.studentList = res.data.list\r\n    }\r\n  }\r\n\r\n  async queryCourseClassList(query: string) {\r\n    const option = {\r\n      page: 1,\r\n      pageSize: 20,\r\n      no: query\r\n    }\r\n    const res = await this.api.queryCourseClass(option)\r\n    if (res.status === 0) {\r\n      this.courseClassList = res.data.list\r\n    }\r\n  }\r\n\r\n  handleSelect(select:m.SelectCourse[]) {\r\n    this.selectCourseId = select.map((item:m.SelectCourse) => {\r\n      return item.id\r\n    })\r\n  }\r\n\r\n  handleBatchDelete() {\r\n    if (this.selectCourseId.length < 1) {\r\n      this.$message({\r\n        type: 'warning',\r\n        message: '请先选择要删除项'\r\n      })\r\n      return\r\n    }\r\n    this.$confirm(`确定要批量删除所选项吗？`, '提示', {\r\n      type: 'warning'\r\n    }).then(async() => {\r\n      const resp = await this.api.batchDeleteSelectCourse(this.selectCourseId)\r\n      if (resp.status === 0) {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        })\r\n        this.requestData()\r\n      }\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=8fd50916&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}