(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0cc1dc"],{"4d0f":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-form",{ref:"searchForm",attrs:{inline:!0,model:e.queryOptions},nativeOn:{submit:function(t){return t.preventDefault(),e.handleFilter(t)}}},[r("el-form-item",{attrs:{prop:"semester"}},[r("el-input",{attrs:{placeholder:"学期",maxlength:"10"},model:{value:e.queryOptions.semester,callback:function(t){e.$set(e.queryOptions,"semester",t)},expression:"queryOptions.semester"}})],1),r("el-form-item",{attrs:{prop:"teacher"}},[r("el-input",{attrs:{placeholder:"执教老师姓名",maxlength:"10"},model:{value:e.queryOptions.teacher,callback:function(t){e.$set(e.queryOptions,"teacher",t)},expression:"queryOptions.teacher"}})],1),r("el-form-item",{attrs:{prop:"course"}},[r("el-input",{attrs:{placeholder:"课程名称",maxlength:"10"},model:{value:e.queryOptions.course,callback:function(t){e.$set(e.queryOptions,"course",t)},expression:"queryOptions.course"}})],1),r("el-form-item",[r("el-button",{attrs:{icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("\n        搜索\n      ")]),r("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.handleCreate}},[e._v("\n        开课信息\n      ")])],1),r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.showCheckbox=!e.showCheckbox}}},[e._v("\n      多选\n    ")]),e.showCheckbox?r("el-button",{attrs:{type:"danger"},on:{click:e.handleBatchDelete}},[e._v("\n      批量删除\n    ")]):e._e(),r("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){e.showExcelDialog=!0}}},[e._v("\n      批量导入开课信息\n    ")])],1),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.data,border:"",fit:"","highlight-current-row":""},on:{"selection-change":e.handleSelect}},[e.showCheckbox?r("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),r("el-table-column",{attrs:{align:"center",label:"课程序号",prop:"no"}}),r("el-table-column",{attrs:{prop:"semester",align:"center",label:"学期"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.semester?r("span",[e._v("\n          "+e._s(t.row.semester)+"\n        ")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"course",align:"center",label:"课程名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.course?r("span",[e._v("\n          "+e._s(t.row.course)+"\n        ")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"jno",align:"center",label:"执教老师工号"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.jno?r("span",[e._v("\n          "+e._s(t.row.jno)+"\n        ")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"teacher",align:"center",label:"执教老师姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.teacher?r("span",[e._v("\n          "+e._s(t.row.teacher)+"\n        ")]):e._e()]}}])}),r("el-table-column",{attrs:{align:"center",prop:"startWeek",label:"开课周次"}}),r("el-table-column",{attrs:{align:"center",prop:"endWeek",label:"结课周次"}}),r("el-table-column",{attrs:{align:"center",label:"状态",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[0===t.row.status?r("el-button",{attrs:{prop:"status",type:"success",size:"mini",plain:""}},[e._v("\n          正常\n        ")]):1===t.row.status?r("el-button",{attrs:{type:"danger",size:"mini",plain:""}},[e._v("\n          异常\n        ")]):r("el-button",{attrs:{type:"warning",size:"mini",plain:""}},[e._v("\n          未知\n        ")])]}}])}),r("el-table-column",{attrs:{align:"center",label:"操作",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.handleEdit(t.row)}}},[e._v("\n          编辑\n        ")]),r("el-button",{staticStyle:{marginTop:"3px"},attrs:{type:"danger",size:"mini"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("\n          删除\n        ")])]}}])})],1),r("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryOptions.page,limit:e.queryOptions.pageSize},on:{"update:page":function(t){return e.$set(e.queryOptions,"page",t)},"update:limit":function(t){return e.$set(e.queryOptions,"pageSize",t)},pagination:e.requestData}}),r("el-dialog",{attrs:{title:(e.courseClass.id?"编辑":"添加")+"开课信息",visible:e.showDialog},on:{"update:visible":function(t){e.showDialog=t},close:function(t){e.showDialog=!1}}},[e.showDialog?r("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.rules,"label-position":"top"}},[r("el-form-item",{attrs:{prop:"no",label:"课程序号"}},[r("el-input",{attrs:{placeholder:"请输入课程序号",maxlength:"20"},model:{value:e.editForm.no,callback:function(t){e.$set(e.editForm,"no",t)},expression:"editForm.no"}})],1),r("el-form-item",{attrs:{prop:"semesterId",label:"学期"}},[r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择学期","remote-method":e.querySemesterList,loading:e.loading},model:{value:e.editForm.semesterId,callback:function(t){e.$set(e.editForm,"semesterId",t)},expression:"editForm.semesterId"}},e._l(e.semesterList,function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"courseId",label:"课程名称"}},[r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择课程","remote-method":e.queryCourseList,loading:e.loading},model:{value:e.editForm.courseId,callback:function(t){e.$set(e.editForm,"courseId",t)},expression:"editForm.courseId"}},e._l(e.courseList,function(e){return r("el-option",{key:e.id,attrs:{label:e.code+e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"teacherId",label:"执教老师"}},[r("el-select",{attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"请选择执教老师","remote-method":e.queryTeacherList,loading:e.loading},model:{value:e.editForm.teacherId,callback:function(t){e.$set(e.editForm,"teacherId",t)},expression:"editForm.teacherId"}},e._l(e.teacherList,function(e){return r("el-option",{key:e.id,attrs:{label:e.jno+e.name,value:e.id}})}),1)],1),r("el-form-item",{attrs:{prop:"startWeek",label:"开课周次"}},[r("el-input-number",{attrs:{min:1,step:1,max:25},model:{value:e.editForm.startWeek,callback:function(t){e.$set(e.editForm,"startWeek",t)},expression:"editForm.startWeek"}})],1),r("el-form-item",{attrs:{prop:"endWeek",label:"结课周次"}},[r("el-input-number",{attrs:{min:1,step:1,max:25},model:{value:e.editForm.endWeek,callback:function(t){e.$set(e.editForm,"endWeek",t)},expression:"editForm.endWeek"}})],1),r("el-form-item",{attrs:{prop:"status",label:"状态"}},[r("el-select",{attrs:{placeholder:"请选择状态"},model:{value:e.editForm.status,callback:function(t){e.$set(e.editForm,"status",t)},expression:"editForm.status"}},e._l(e.statusOption,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1):e._e(),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.showDialog=!1}}},[e._v("\n        取 消\n      ")]),r("el-button",{attrs:{type:"primary"},on:{click:e.handleSave}},[e._v("\n        确 定\n      ")])],1)],1),r("excel-dialog",{attrs:{action:"/course-class/batchSave",show:e.showExcelDialog},on:{"update:show":function(t){e.showExcelDialog=t},requestData:e.requestData}})],1)},s=[],n=(r("ac6a"),r("96cf"),r("3b8d")),o=r("d225"),i=r("b0b4"),l=r("308d"),u=r("6bb5"),c=r("4e2b"),d=r("9ab4"),p=r("60a3"),m=r("de46"),h=function(e){function t(){var e;return Object(o["a"])(this,t),e=Object(l["a"])(this,Object(u["a"])(t).apply(this,arguments)),e.data=[],e.total=0,e.loading=!0,e.courseClass={},e.semesterList=[],e.teacherList=[],e.courseList=[],e.showDialog=!1,e.editForm={},e.showCheckbox=!1,e.selectCourseClassId=[],e.showExcelDialog=!1,e.statusOption=[{value:0,label:"正常"},{value:1,label:"异常"},{value:2,label:"未知"}],e.queryOptions={semester:"",teacher:"",course:"",page:1,pageSize:20},e.rules={no:[{required:!0,message:"课程序号不能为空",trigger:"blur"}],semesterId:[{required:!0,message:"学期不能为空",trigger:"blur"}],teacherId:[{required:!0,message:"执教老师不能为空",trigger:"blur"}],courseId:[{required:!0,message:"课程名称不能为空",trigger:"blur"}]},e}return Object(c["a"])(t,e),Object(i["a"])(t,[{key:"created",value:function(){this.init()}},{key:"init",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.requestData(),this.querySemesterList(""),this.queryTeacherList(""),this.queryCourseList("");case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleFilter",value:function(){this.queryOptions.page=1,this.requestData()}},{key:"requestData",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.api.queryCourseClass(this.queryOptions);case 3:t=e.sent,this.data=t.data.list,this.total=t.data.total,this.loading=!1;case 7:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"handleCreate",value:function(){this.courseClass={},this.resetForm(),this.showDialog=!0}},{key:"resetForm",value:function(){this.editForm={no:"",semesterId:void 0,teacherId:void 0,courseId:void 0,startWeek:3,endWeek:18,status:void 0}}},{key:"handleEdit",value:function(e){this.courseClass=e,this.editForm={no:e.no,semesterId:e.semesterId,teacherId:e.teacherId,courseId:e.courseId,startWeek:e.startWeek,endWeek:e.endWeek,status:e.status},this.showDialog=!0}},{key:"handleSave",value:function(){var e=this;this.$refs["editForm"].validate(function(){var t=Object(n["a"])(regeneratorRuntime.mark(function t(r){var a,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=14;break}if(!e.courseClass.id){t.next=8;break}return t.next=4,e.api.putCourseClass(e.courseClass.id,e.editForm);case 4:a=t.sent,0===a.status&&(e.resetForm(),e.showDialog=!1,e.$message({type:"success",message:"修改成功!"}),e.requestData()),t.next=12;break;case 8:return t.next=10,e.api.createCourseClass(e.editForm);case 10:s=t.sent,0===s.status&&(e.$refs["editForm"].resetFields(),e.showDialog=!1,e.$message({type:"success",message:"添加成功!"}),e.requestData());case 12:t.next=15;break;case 14:return t.abrupt("return",!1);case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())}},{key:"handleDelete",value:function(e){var t=this;this.$confirm("确定删除".concat(e.no,"吗？"),"提示",{type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,t.api.deleteCourseClass(e.id);case 2:a=r.sent,0===a.status&&(t.$message({type:"success",message:"删除成功!"}),t.data=t.data.filter(function(t){return t.id!==e.id}),t.total>1?t.total--:t.requestData());case 4:case"end":return r.stop()}},r)})))}},{key:"querySemesterList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r={page:1,pageSize:20,name:t},e.next=3,m["querySemester"](r);case 3:a=e.sent,0===a.status&&a.data.list.length>0&&(this.semesterList=a.data.list);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"queryTeacherList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r={page:1,pageSize:20,name:t},e.next=3,m["queryTeacher"](r);case 3:a=e.sent,0===a.status&&a.data.list.length>0&&(this.teacherList=a.data.list,console.log(this.teacherList));case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"queryCourseList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){var r,a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return r={page:1,pageSize:20,name:t},e.next=3,m["queryCourse"](r);case 3:a=e.sent,0===a.status&&a.data.list.length>0&&(this.courseList=a.data.list);case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"queryCourseClassList",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t,r){var a,s,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a={page:1,pageSize:20,no:t},e.next=3,m["queryCourseClass"](a);case 3:s=e.sent,n=[{}],0===s.status&&s.data.list.length>0&&(n=s.data.list,n.forEach(function(e){e.value=e.no})),r(n);case 7:case"end":return e.stop()}},e)}));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"handleSelect",value:function(e){this.selectCourseClassId=e.map(function(e){return e.id})}},{key:"handleBatchDelete",value:function(){var e=this;this.selectCourseClassId.length<1?this.$message({type:"warning",message:"请先选择要删除项"}):this.$confirm("确定要批量删除所选项吗？","提示",{type:"warning"}).then(Object(n["a"])(regeneratorRuntime.mark(function t(){var r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.api.batchDeleteCourseClass(e.selectCourseClassId);case 2:r=t.sent,0===r.status&&(e.$message({type:"success",message:"删除成功!"}),e.requestData());case 4:case"end":return t.stop()}},t)})))}}]),t}(p["d"]);h=Object(d["a"])([Object(p["a"])({})],h);var f=h,g=f,b=r("2877"),v=Object(b["a"])(g,a,s,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d0cc1dc.620d95d9.js.map