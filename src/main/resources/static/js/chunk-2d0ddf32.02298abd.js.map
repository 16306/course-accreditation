{"version":3,"sources":["webpack:///./src/views/graduation-demand/index.vue?a68a","webpack:///./src/views/graduation-demand/index.vue?5f15","webpack:///./src/views/graduation-demand/index.vue?2d3b","webpack:///./src/views/graduation-demand/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","queryOptions","nativeOn","$event","preventDefault","handleFilter","model","value","callback","$$v","$set","expression","queryMajorList","on","_v","handleCreate","showCheckbox","handleBatchDelete","_e","showExcelDialog","directives","name","rawName","staticStyle","data","handleSelect","scopedSlots","_u","key","fn","scope","row","content","handleEdit","handleDelete","total","page","pageSize","requestData","graduationDemand","id","showDialog","editForm","rules","queryMajorSelectList","loading","_l","item","slot","handleSave","staticRenderFns","selectGraduationDemandId","majorList","no","majorId","required","message","trigger","init","api","queryGraduationDemand","res","list","resetForm","undefined","Object","assign","$refs","validate","valid","putGraduationDemand","status","$message","type","createGraduationDemand","resetFields","$confirm","then","deleteGraduationDemand","resp","filter","e","query","cb","option","queryMajor","map","sno","length","select","batchDeleteGraduationDemand","component"],"mappings":"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","file":"js/chunk-2d0ddf32.02298abd.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-form',{ref:\"searchForm\",attrs:{\"inline\":true,\"model\":_vm.queryOptions},nativeOn:{\"submit\":function($event){$event.preventDefault();return _vm.handleFilter($event)}}},[_c('el-form-item',{attrs:{\"prop\":\"no\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入毕业要求代码\",\"maxlength\":\"10\"},model:{value:(_vm.queryOptions.no),callback:function ($$v) {_vm.$set(_vm.queryOptions, \"no\", $$v)},expression:\"queryOptions.no\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"major\"}},[_c('el-autocomplete',{staticClass:\"inline-input\",attrs:{\"fetch-suggestions\":_vm.queryMajorList,\"placeholder\":\"请输入专业名称\"},model:{value:(_vm.queryOptions.major),callback:function ($$v) {_vm.$set(_vm.queryOptions, \"major\", $$v)},expression:\"queryOptions.major\"}})],1),_c('el-form-item',[_c('el-button',{attrs:{\"icon\":\"el-icon-search\"},on:{\"click\":_vm.handleFilter}},[_vm._v(\"\\n        搜索\\n      \")]),_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-plus\"},on:{\"click\":_vm.handleCreate}},[_vm._v(\"\\n        毕业要求\\n      \")])],1),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.showCheckbox=!_vm.showCheckbox}}},[_vm._v(\"\\n      多选\\n    \")]),(_vm.showCheckbox)?_c('el-button',{attrs:{\"type\":\"danger\"},on:{\"click\":_vm.handleBatchDelete}},[_vm._v(\"\\n      批量删除\\n    \")]):_vm._e(),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\"},on:{\"click\":function($event){_vm.showExcelDialog=true}}},[_vm._v(\"\\n      批量导入毕业要求\\n    \")])],1),_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.loading),expression:\"loading\"}],staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.data,\"border\":\"\",\"fit\":\"\",\"highlight-current-row\":\"\"},on:{\"selection-change\":_vm.handleSelect}},[(_vm.showCheckbox)?_c('el-table-column',{attrs:{\"type\":\"selection\",\"width\":\"55\"}}):_vm._e(),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"毕业要求代码\",\"prop\":\"no\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"content\",\"label\":\"描述\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('text-view',{attrs:{\"value\":scope.row.content}})]}}])}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"major\",\"label\":\"专业\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"createTime\",\"label\":\"添加时间\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"updateTime\",\"label\":\"更新时间\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleEdit(scope.row)}}},[_vm._v(\"\\n          编辑\\n        \")]),_c('el-button',{attrs:{\"type\":\"danger\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.handleDelete(scope.row)}}},[_vm._v(\"\\n          删除\\n        \")])]}}])})],1),_c('pagination',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.total > 0),expression:\"total > 0\"}],attrs:{\"total\":_vm.total,\"page\":_vm.queryOptions.page,\"limit\":_vm.queryOptions.pageSize},on:{\"update:page\":function($event){return _vm.$set(_vm.queryOptions, \"page\", $event)},\"update:limit\":function($event){return _vm.$set(_vm.queryOptions, \"pageSize\", $event)},\"pagination\":_vm.requestData}}),_c('el-dialog',{attrs:{\"title\":((_vm.graduationDemand.id ? '编辑' : '添加') + \"毕业要求\"),\"visible\":_vm.showDialog},on:{\"update:visible\":function($event){_vm.showDialog=$event},\"close\":function($event){_vm.showDialog = false}}},[(_vm.showDialog)?_c('el-form',{ref:\"editForm\",attrs:{\"model\":_vm.editForm,\"rules\":_vm.rules,\"label-position\":\"top\"}},[_c('el-form-item',{attrs:{\"prop\":\"no\",\"label\":\"毕业要求代码\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入毕业要求代码\",\"maxlength\":\"10\"},model:{value:(_vm.editForm.no),callback:function ($$v) {_vm.$set(_vm.editForm, \"no\", $$v)},expression:\"editForm.no\"}})],1),_c('el-form-item',{attrs:{\"prop\":\"majorId\",\"label\":\"专业\"}},[_c('el-select',{attrs:{\"filterable\":\"\",\"remote\":\"\",\"reserve-keyword\":\"\",\"placeholder\":\"请选择专业\",\"remote-method\":_vm.queryMajorSelectList,\"loading\":_vm.loading},model:{value:(_vm.editForm.majorId),callback:function ($$v) {_vm.$set(_vm.editForm, \"majorId\", $$v)},expression:\"editForm.majorId\"}},_vm._l((_vm.majorList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item.name,\"value\":item.id}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"毕业要求描述\",\"prop\":\"content\"}},[_c('text-editor',{ref:\"title\",attrs:{\"placeholder\":\"请输入毕业要求描述\"},model:{value:(_vm.editForm.content),callback:function ($$v) {_vm.$set(_vm.editForm, \"content\", $$v)},expression:\"editForm.content\"}})],1)],1):_vm._e(),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.showDialog = false}}},[_vm._v(\"\\n        取 消\\n      \")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSave}},[_vm._v(\"\\n        确 定\\n      \")])],1)],1),_c('excel-dialog',{attrs:{\"action\":\"/graduationDemand/batchSave\",\"show\":_vm.showExcelDialog},on:{\"update:show\":function($event){_vm.showExcelDialog=$event},\"requestData\":_vm.requestData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport { ElForm } from 'element-ui/types/form'\r\nimport * as m from '@/api/model'\r\nimport { Quill } from 'quill'\r\nimport { string2delta, deltaToString } from '@/utils/quill'\r\nimport { deepcopy } from '../../utils'\r\n\r\n@Component({})\r\nexport default class GraduationDemand extends Vue {\r\n  data:m.GraduationDemand[] = []\r\n  total = 0\r\n  loading = true\r\n  editForm:m.CreateGraduationDemandForm={} as any\r\n  graduationDemand: m.GraduationDemand = {} as any\r\n  showDialog = false\r\n  showCheckbox = false\r\n  selectGraduationDemandId:number[] = []\r\n  showExcelDialog=false\r\n  majorList: m.Major[] = []\r\n\r\n  queryOptions = {\r\n    no: '',\r\n    content: '',\r\n    page: 1,\r\n    pageSize: 20\r\n  }\r\n\r\n  rules = {\r\n    majorId: [{ required: true, message: '专业不能为空', trigger: 'blur' }],\r\n    no: [{ required: true, message: '编号不能为空', trigger: 'blur' }],\r\n    content: [{ required: true, message: '描述不能为空', trigger: 'blur' }]\r\n  };\r\n\r\n  created() {\r\n    this.init()\r\n  }\r\n\r\n  async init() {\r\n    this.requestData()\r\n    this.queryMajorSelectList('')\r\n  }\r\n\r\n  handleFilter() {\r\n    this.queryOptions.page = 1\r\n    this.requestData()\r\n  }\r\n\r\n  async requestData() {\r\n    this.loading = true\r\n    const res = await this.api.queryGraduationDemand(this.queryOptions)\r\n    this.data = res.data.list\r\n    this.total = res.data.total\r\n    this.loading = false\r\n  }\r\n\r\n  handleCreate() {\r\n    this.graduationDemand = {} as any\r\n    this.resetForm()\r\n    this.showDialog = true\r\n  }\r\n\r\n  resetForm() {\r\n    this.editForm = {\r\n      no: '',\r\n      majorId: undefined,\r\n      content: ''\r\n    }\r\n  }\r\n\r\n  handleEdit(graduationDemand: m.GraduationDemand) {\r\n    this.graduationDemand = graduationDemand\r\n    Object.assign(this.editForm, {\r\n      no: graduationDemand.no,\r\n      content: graduationDemand.content,\r\n      majorId: graduationDemand.majorId\r\n    })\r\n    this.showDialog = true\r\n  }\r\n\r\n  handleSave() {\r\n    (this.$refs['editForm'] as ElForm).validate(async(valid : boolean) => {\r\n      if (valid) {\r\n        if (this.graduationDemand.id) {\r\n          const res = await this.api.putGraduationDemand(this.graduationDemand.id, this.editForm)\r\n          if (res.status === 0) {\r\n            this.resetForm()\r\n            this.showDialog = false\r\n            this.$message({\r\n              type: 'success',\r\n              message: '修改成功!'\r\n            })\r\n            this.requestData()\r\n          }\r\n        } else {\r\n          const res = await this.api.createGraduationDemand(this.editForm)\r\n          if (res.status === 0) {\r\n            (this.$refs['editForm'] as ElForm).resetFields()\r\n            this.showDialog = false\r\n            this.$message({\r\n              type: 'success',\r\n              message: '添加成功!'\r\n            })\r\n            this.requestData()\r\n          }\r\n        }\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n  }\r\n\r\n  handleDelete(graduationDemand: m.GraduationDemand) {\r\n    this.$confirm(`确定删除${graduationDemand.no}吗？`, '提示', {\r\n      type: 'warning'\r\n    }).then(async() => {\r\n      const resp = await this.api.deleteGraduationDemand(graduationDemand.id)\r\n      if (resp.status === 0) {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        })\r\n        this.data = this.data.filter((e: m.GraduationDemand) => e.id !== graduationDemand.id)\r\n        if (this.total > 1) {\r\n          this.total--\r\n        } else {\r\n          this.requestData()\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  async queryMajorList(query: string, cb:any) {\r\n    // cb为搜索后的回调钩子\r\n    const option = {\r\n      page: 1,\r\n      pageSize: 20,\r\n      name: query\r\n    }\r\n    const res = await this.api.queryMajor(option)\r\n    if (res.status === 0) {\r\n      let majorList = res.data.list.map((item:m.Major) => {\r\n        return { value: item.name }\r\n      })\r\n      cb(majorList)\r\n    }\r\n  }\r\n\r\n  async queryMajorSelectList(query: string) {\r\n    const option = {\r\n      page: 1,\r\n      pageSize: 20,\r\n      sno: query\r\n    }\r\n    const res = await this.api.queryMajor(option)\r\n    if (res.status === 0 && res.data.list.length > 0) {\r\n      this.majorList = res.data.list\r\n    }\r\n  }\r\n\r\n  handleSelect(select:m.GraduationDemand[]) {\r\n    this.selectGraduationDemandId = select.map((item:m.GraduationDemand) => {\r\n      return item.id\r\n    })\r\n  }\r\n\r\n  handleBatchDelete() {\r\n    if (this.selectGraduationDemandId.length < 1) {\r\n      this.$message({\r\n        type: 'warning',\r\n        message: '请先选择要删除项'\r\n      })\r\n      return\r\n    }\r\n    this.$confirm(`确定要批量删除所选项吗？`, '提示', {\r\n      type: 'warning'\r\n    }).then(async() => {\r\n      const resp = await this.api.batchDeleteGraduationDemand(this.selectGraduationDemandId)\r\n      if (resp.status === 0) {\r\n        this.$message({\r\n          type: 'success',\r\n          message: '删除成功!'\r\n        })\r\n        this.requestData()\r\n      }\r\n    })\r\n  }\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=7ec347e3&\"\nimport script from \"./index.vue?vue&type=script&lang=ts&\"\nexport * from \"./index.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}